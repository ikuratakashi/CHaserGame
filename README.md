# CHaser Game client - Python3

```
  ____ _   _                        ____    _    __  __ _____
 / ___| | | | __ _ ___  ___ _ __   / ___|  / \  |  \/  | ____|
| |   | |_| |/ _` / __|/ _ \ '__| | |  _  / _ \ | |\/| |  _|
| |___|  _  | (_| \__ \  __/ |    | |_| |/ ___ \| |  | | |___
 \____|_| |_|\__,_|___/\___|_|     \____/_/   \_\_|  |_|_____|

-- FG204 2nd EDITION Ver2.31 --
```

CHaserのクライアントとして起動することで、自分でコマンドラインから自機を操作をできるようにしました。

どんどん機能を実装していきたいのですが、相手に対して何かさせようとすると、サーバ側のプログラムを修正する必要があるため、なかなか手が動きません。

# 実行方法

### 通常の起動方法
```sh
 python CHaserGame.py
```
通常通り、ポート番号、名前、ホスト名のキー入力が求められます。

### COOLで起動する場合
```sh
 CHaserGame.py -c c
```

### HOTで起動する場合
```sh
 CHaserGame.py -c h
```

`-c` を引数にした場合には、CHaser.pyに記載されている、ポート番号、名前、ホスト名の値を読み込みます。

CHaser.pyの設定部分

```python
#定数 起動パラメータ
#SERVER_IP = "192.1.2.207"
SERVER_IP = "192.168.3.16"  # ホストのIP
LISN_PORT_C = "2009"        # coolのポート番号
LISN_PORT_H = "2010"        # hotのポート番号
USER_NAME_C = "COOL"        # cool時の名前
USER_NAME_H = "HOT"         # hot時の名前
```

## シェル(bash)での実行方法（macなどunix用）

run.sh がクライアントの起動シェルです。
ホストの設定に合わせて修正してください。

COOLで起動する場合
```sh
 ./run.sh c
```

HOTで起動する場合
```sh
 ./run.sh h
```

## 自分の環境での動かし方(Ikuraのmac環境のメモ)

COOLで起動する場合
```sh
python3.12 CHaserGame.py -c c
```

HOTで起動する場合
```sh
python3.12 CHaserGame.py -c h
```

# 遊び方

自分のターンになると、周辺の状況が表示されて、自機に対する操作の番号を入力します。

```
****************************************************************
 自分のターン[Turn:1]
----------------------------------------------------------------
AreaMap [Action After]
----------------------------------------------------------------
. . $
. + .
$ . .
----------------------------------------------------------------
Level:1 / HP:100 / Exp:0/100
Wepon:BLOCK(999) / BOM(1) / EYE(5) / ?????(1)
WeponUse:
----------------------------------------------------------------
[Move] ←:4 →:6 ↑:2 ↓:8 Serch:s Look:l Wepon:w ...
```
※Level、HP、Expが表示されていますが、動きについては作成していません。

独自のコマンドとして `wepon` を用意しました。`w` を入力してエンターを押すと、武器の使用コマンドが表示されます。
```
[Move] ←:4 →:6 ↑:2 ↓:8 Serch:s Look:l Wepon:w ...w
Wepon : 武器を選択して使用します。
[Wepon] BLOCK:b BOM:bom EYE:e ?????:0 HELP:h Cancel:未入力 ...
```

- b ブロックを置く
- bom ボムを設置（未実装）
- e 周辺のマップを表示する。これは移動したことのある位置の周辺やSearchやLookの内容を記録して表示します。
- 0 効果が不明な武器の使用をします（未実装）
- h 各武器のヘルプが表示されます。

EYEの実行例
```
----------------------------------------------------------------
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? . . # ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? . ^ # ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? $ . # ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? . . . . $ ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? $ . . . . ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? . . $ . . ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
----------------------------------------------------------------
Level:1 / HP:100 / Exp:0/100
Wepon:BLOCK(999) / BOM(1) / EYE(4) / ???(3)
WeponUse:EYE(10/15)
----------------------------------------------------------------
```
GetReadyやwalkなどの戻り値を地図として記憶しています。最新の状態ではないので注意が必要です。

# その他
コマンドの入力待ちの状態で、サーバ側でゲームセットとなった場合に、コマンドを入力した後にゲームセットの情報を受信します。

### CHaser.pyの修正箇所
CHaserの基本モジュールのCHaser.pyに若干手を加えています。

### 起動パラメータの追加

- 起動時にcoolかhotを引数で選択 `-c {c|h}`

# CHaserGameが起動しない場
CHaserGameが起動せずにエラーとなる場合は、ライブラリの読み込みに失敗している可能性が高いです。

以下のライブラリを使用していますので、再度ローカルにインストールしてください。

- colorama
コマンドラインに表示する時の文字色を設定する時に、OS依存を埋めてくれます。

- pyfiglet
指定した文字をアスキーアートで表示してくれます。

## ライブラリのインストール方法

1. CHaserGame.pyと同じ階層に `lib` フォルダを作成

以下のようなフォルダ階層にしてください。

```
CHASERGAME
 ├ lib
 ├ CHaserGame.py

``` 

2. インストール実行のコマンドを入力し、エンターキーを押す

```cmd
pip install colorama --target /lib
```
```cmd
pip install pyfiglet --target /lib
```

これを実行した後に、CHaserGameを起動すると、起動画面が正常に表示されると思います。